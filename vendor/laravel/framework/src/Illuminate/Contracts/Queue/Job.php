1]||null;return a},Sgk=function(a,b,c){this.xx=a;this.service=b;this.payload=c},Ugk=function(a){var b=new Sgk(a.channelName,a.service,a.payload);a=b.xx;var c=b.service;b=b.payload;var d=Qgk[a];if(d)return d.ha(c,b),!0;d=Rgk(b)[0];for(var e in Qgk){var f=Qgk[e];if(1==f.Np()&&!f.isConnected()&&c==_.Pn&&d==Cgk)return Tgk(f,a),f.ha(c,b),!0}return!1},Vgk=function(a,b){Ogk.call(this,b);this.ha=a;this.Va=new _.Vr(this);this.mb(this.Va);this.Ca=new _.Bz(100,
this.getWindow());this.mb(this.Ca);this.wa=new _.Xr;this.Aa=new _.Xr;this.oa=new _.Xr;this.Fa=Lgk(10);this.Da=null;this.Ba={};this.Ia=this.ha.name;a=this.ha;b=this.ha.Np();Tgk(a,this.ha.name+"_"+b);this.Ga=!1;_.Uy(this.oa,this.wa);_.Uy(this.oa,this.Aa);this.oa.addCallback(this.gCc,this);this.oa.callback(!0);this.Va.listen(this.Ca,_.Fn,this.TNb)};_.is(Vgk,Ogk);_.v=Vgk.prototype;_.v.eja=2;
_.v.Fmc=function(a){a=Rgk(a);var b=a[1];switch(a[0]){case Dgk:this.wa.hj()||this.wa.callback(!0);break;case Cgk:this.send(_.Pn,Dgk),this.Aa.hj()||this.Aa.callback(!0),null!=this.Da&&this.Da!=b&&this.send(_.Pn,"SETUP,"+this.Fa),this.Da=b}};_.v.connect=function(){var a=this.getWindow();if(a){var b=_.gp(a);0==(Pgk[b]||0)&&null==_.fs(Ggk,a)&&_.es(Ggk,Ugk,a);Pgk[b]++;this.Ga=!0;this.TNb()}};_.v.TNb=function(){this.ha.isConnected()?this.Ca.stop():(this.Ca.start(),this.send(_.Pn,"SETUP,"+this.Fa))};
_.v.send=function(a,b){if(this.ha.zS){var c=0==this.ha.Np()?1:0;a=new Sgk(this.Ia+"_"+c,a,b);this.ha.Tb().directSyncMode?this.J_b(a):this.Ba[_.gp(a)]=_.Cz((0,_.G)(this.J_b,this,a),0)}};_.v.J_b=function(a){var b=_.gp(a);this.Ba[b]&&delete this.Ba[b];try{var c=_.fs(Ggk,this.ha.zS)}catch(d){return}if(null!==c)try{c({channelName:a.xx,service:a.service,payload:a.payload})}catch(d){}};_.v.gCc=function(){Wgk(this.ha,(this.ha.Tb(),0))};
_.v.nb=function(){if(this.Ga){var a=this.getWindow(),b=_.gp(a);1==--Pgk[b]&&_.es(Ggk,null,a)}this.Ba&&(_.op(this.Ba,function(c){_.Dz(c)}),this.Ba=null);this.wa&&(this.wa.cancel(),delete this.wa);this.Aa&&(this.Aa.cancel(),delete this.Aa);this.oa&&(this.oa.cancel(),delete this.oa);Vgk.Ab.nb.call(this)};
var Xgk={},Ygk=function(a){a=a.split(",");a[1]=a[1]||null;return a},$gk=function(a){var b=a.Lf().data;if(typeof b!==_.jn)return!1;var c=b.indexOf("|"),d=b.indexOf(":");if(-1==c||-1==d)return!1;var e=b.substring(0,c);c=b.substring(c+1,d);b=b.substring(d+1);if(d=Qgk[e])return d.ha(c,b,a.Lf().origin),!0;d=Ygk(b)[0];for(var f in Qgk){var h=Qgk[f];if(1==h.Np()&&!h.isConnected()&&c==_.Pn&&(d==Cgk||"SETUP_NTPV2"==d)&&Zgk(h,a.Lf().origin))return Tgk(h,e),h.ha(c,b),!0}return!1},ahk=function(a,b,c,d,e){Ogk.call(this,
c);this.Aa=a;this.Ba=e||2;this.Ia=b||"*";this.Va=new _.Vr(this);this.Ca=new _.Bz(100,this.getWindow());this.Fa=!!d;this.oa=new _.Xr;this.wa=new _.Xr;this.ha=new _.Xr;this.Ga=Lgk(10);this.Da=null;this.Fa?1==this.Aa.Np()?_.Uy(this.ha,this.oa):_.Uy(this.ha,this.wa):(_.Uy(this.ha,this.oa),2==this.Ba&&_.Uy(this.ha,this.wa));this.ha.addCallback(this.hCc,this);this.ha.callback(!0);this.Va.listen(this.Ca,_.Fn,this.VNb)};_.is(ahk,Ogk);_.v=ahk.prototype;_.v.fP=null;_.v.UNb=!1;_.v.eja=1;_.v.BIa=0;
_.v.Fmc=function(