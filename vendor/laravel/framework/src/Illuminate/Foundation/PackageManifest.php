Fa=function(a){this.oa=Date.now();this.wa=new p4(a.position.x,a.position.y);300<this.oa-this.Ba&&this.dispatchEvent(new Z6m(null));this.Ba=this.oa};
$6m.prototype.Ca=function(){if(200>Date.now()-this.oa){this.ha.scale(.2);var a=t6m(this.ha);1E3<a&&this.ha.scale(1E3/a);10<=t6m(this.ha)&&this.dispatchEvent(new Z6m(this.ha))}this.oa=0;this.wa=new p4(0,0);this.ha=new p4(0,0)};$6m.prototype.Da=function(a){var b=Date.now(),c=b-this.oa;50>c||(this.Ba=0,this.ha.x=a.position.x,this.ha.y=a.position.y,this.ha.Af(this.wa),this.ha.scale(1E3/c),this.oa=b,this.wa.x=a.position.x,this.wa.y=a.position.y)};
var a7m=function(a){_.Yy.call(this,"double_tap");this.position=a};_.F(a7m,_.Yy);
var b7m=function(a){_.Or.call(this);this.oa=O6m(a);this.Aa=0;this.ha=!1;this.wa=new _.Vr(this);this.mb(this.wa);_.Oab&&this.wa.listen(this.oa,[_.On,_.Nn,_.Mn],this.Ba)};_.F(b7m,_.Or);
b7m.prototype.Ba=function(a){if(1==a.Lf().changedTouches.length&&this.oa.offsetParent){var b=a.Lf().changedTouches[0];a.type==_.Mn?(a=_.$z(this.oa),b=new _.Ms(b.pageX-a.x,b.pageY-a.y),a=Date.now(),300>=a-this.Aa&&this.ha&&this.dispatchEvent(new a7m(b)),this.ha&&(this.Aa=a,this.ha=!1)):a.type==_.On?this.ha=!0:a.type==_.Nn&&(this.ha=!1)}};
var c7m=function(a){_.Or.call(this);this.ha=new _.Vr(this);this.mb(this.ha);this.oa=O6m(a);this.wa=new _.D4d(this.oa);this.mb(this.wa);this.Aa=new b7m(this.oa);this.mb(this.Aa);this.Vf=new _.VB;this.mb(this.Vf);this.Fa=!0;this.Ba=0;this.Ca=100;this.ha.listen(this.Aa,"double_tap",this.Ja);this.ha.listen(this.oa,_.Ih,this.Da);this.ha.listen(this.wa,_.A4d,this.Ia);this.ha.listen(this.Vf,_.Vj,this.Ga)};_.F(c7m,_.Or);c7m.prototype.Ja=function(a){this.Da({offsetX:a.position.x,offsetY:a.position.y})};
c7m.prototype.Da=function(a){this.dispatchEvent(new X6m(1,2,new p4(a.offsetX,a.offsetY)))};c7m.prototype.Ia=function(a){if(this.Fa){var b=Date.now();Math.abs(a.deltaY)>=Math.abs(a.deltaX)&&b-this.Ba>=this.Ca&&(a.preventDefault(),this.dispatchEvent(new X6m(.5*-_.B4d(a.deltaY),1,new p4(a.offsetX,a.offsetY))),this.Ba=b)}};c7m.prototype.Ga=function(a){switch(a.charCode){case 43:case 61:this.dispatchEvent(new X6m(1,3,void 0));break;case 45:case 95:this.dispatchEvent(new X6m(-1,3,void 0))}};
var d7m=function(a,b,c,d){_.Or.call(this);for(var e=0;e<b.length;++e)b[e].ej(this);for(e=0;e<a.length;++e)a[e].ej(this),this.mb(a[e]);this.ha=c;this.oa=d};_.F(d7m,_.Or);d7m.prototype.listen=function(a,b,c,d){return _.Or.prototype.listen.call(this,a,b,!0,d)};var e7m=function(a){this.ha=O6m(a);this.Da=this.Ca=this.Ba=this.Aa=this.wa=!1;this.oa=[]};e7m.prototype.add=function(a){this.oa.push(a);return this};
e7m.prototype.build=function(){var a=[],b=null;this.Da&&(b=new c7m(this.ha),a.push(b));var c=null;this.Aa&&(c=new W6m,a.push(c));this.Ba&&a.push(new Y6m(this.ha));if(this.wa){var d=new U6m(this.ha);a.push(d);this.Ca&&(d=new $6m(d),a.push(d))}return new d7m(a,this.oa,b,c)};
var f7m=function(a){_.Yy.call(this,_.gm);this.size=a};_.F(f7m,_.Yy);
var h7m=function(a,b){_.Or.call(this);this.Aa=O6m(a);this.ha=g7m(this);this.oa=new _.Vr(this);this.mb(this.oa);(void 0===b||b)&&this.oa.listen(window,_.gm,this.wa)};_.F(h7m,_.Or);
var g7m=function(a){var b=a.Aa;if(_.Wz(b,_.Uh)!=_.Yk)var c=new _.Ns(b.clientWidth,b.clientHeight);else{c=b.style;var d=c.display,e=c.visibility,f=c.position;c.visibility=_.ij;c.position=_.Lf;c.display=_.Jj;b=new _.Ns(b.clientWidth,b.clientHeight);c.display=d;c.position=f;c.visibility=e;c=b}return 0==c.width||0==c.height?a.ha||new _.Ns(0,0):c.clone()};h7m.prototype.trigger=function(){this.wa(null)};h7m.prototype.wa=function(){var a=g7m(this);_.Os(this.ha,a)&&0!=a.width&&0!=a.height||(this.ha=a,this.dispatchEvent(new f7m(a)))};
var i7m=function(a,b,c,d){this.x=this.x=a;this.y=this.y=b;this.z=this.z=c;this.size=this.size=void 0!==d?d:null};_.es("MicroscopeState",i7m);_.es("MicroscopeSize",_.Ns);
var j7m=function(a){this.oa=null;this.wa=a;this.Aa=_.AQa;this.ha=0},k7m=function(a){a=a.Aa(a.wa.ha);return new _.Ns(a.width,a.height)},l7m=function(a){return z6m(a.oa,k7m(a))},m7m=function(a,b,c,d){d=Math.max(0,(1-d)/2,a.ha);a=.5-d;d=.5+d;return c>b&&b<a?Math.min(c,a):c<b&&b>d?Math.max(c,d):b};
var n7m=function(a,b,c){_.Yy.call(this,"level_change");this.level=a;this.animate=b;this.ha=void 0!==c?c:null};_.F(n7m,_.Yy);
var o7m=function(a,b,c,d,e){_.Yy.call(this,b6m);this.left=a;this.top=b;this.right=c;this.bottom=d;this.ha=e};_.F(o7m,_.Yy);
_.e